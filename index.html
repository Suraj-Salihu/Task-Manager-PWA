<!DOCTYPE html>
<html lang="en">
<head>  
  <meta charset="UTF-8">  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">  
  
  <!-- Web App Capabilities -->  
  <meta name="mobile-web-app-capable" content="yes">  
  <meta name="application-name" content="Sovex Task Master">  
  <meta name="theme-color" content="#4a6fa5">  
  
  <!-- Apple Specific -->  
  <meta name="apple-mobile-web-app-capable" content="yes">  
  <meta name="apple-mobile-web-app-title" content="Sovex Task Master">  
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">  
  
  <title>Sovex Task Master</title>  
  
  <!-- Manifest and Icons -->  
  <link rel="manifest" href="manifest.json">  
  <link rel="apple-touch-icon" sizes="192x192" href="icons/icon-192x192.png">  
  <link rel="apple-touch-icon" sizes="512x512" href="icons/icon-512x512.png">  
  
  <!-- Font Awesome -->  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">  
  
  <!-- Apple Splash Screens -->  
  <link rel="apple-touch-startup-image" href="splash/iphone5_splash.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">  
  <link rel="apple-touch-startup-image" href="splash/iphone6_splash.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">  
  <link rel="apple-touch-startup-image" href="splash/iphoneplus_splash.png" media="(device-width: 621px) and (device-height: 1104px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">  
  <link rel="apple-touch-startup-image" href="splash/iphonex_splash.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">  
  <link rel="apple-touch-startup-image" href="splash/iphonexr_splash.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">  
  <link rel="apple-touch-startup-image" href="splash/iphonexsmax_splash.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">  
  <link rel="apple-touch-startup-image" href="splash/ipad_splash.png" media="(min-device-width: 768px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">  
  <link rel="apple-touch-startup-image" href="splash/ipadpro1_splash.png" media="(min-device-width: 834px) and (max-device-width: 834px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">  
  <link rel="apple-touch-startup-image" href="splash/ipadpro2_splash.png" media="(min-device-width: 1024px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">
  <style>
    :root {
      --primary-color: #4a6fa5;
      --secondary-color: #166088;
      --accent-color: #4fc3f7;
      --background-color: #f5f7fa;
      --card-color: #ffffff;
      --text-color: #333333;
      --text-light: #666666;
      --border-color: #e0e0e0;
      --success-color: #4caf50;
      --warning-color: #ff9800;
      --danger-color: #f44336;
      --high-priority: #f44336;
      --medium-priority: #ff9800;
      --low-priority: #4caf50;
      --sidebar-width: 280px;
      --header-height: 70px;
    }

    [data-theme="dark"] {
      --primary-color: #5d8acd;
      --secondary-color: #1a73e8;
      --accent-color: #4fc3f7;
      --background-color: #121212;
      --card-color: #1e1e1e;
      --text-color: #e0e0e0;
      --text-light: #a0a0a0;
      --border-color: #333333;
      --success-color: #81c784;
      --warning-color: #ffb74d;
      --danger-color: #e57373;
      --high-priority: #e57373;
      --medium-priority: #ffb74d;
      --low-priority: #81c784;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background-color: var(--background-color);
      color: var(--text-color);
      transition: background-color 0.3s ease, color 0.3s ease;
      min-height: 100vh;
    }

    .container {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    /* Standalone mode adjustments */
    .standalone-mode .app-header {
      padding-top: env(safe-area-inset-top);
      height: calc(var(--header-height) + env(safe-area-inset-top));
    }

    .standalone-mode .main-content {
      padding-bottom: env(safe-area-inset-bottom);
    }

    .app-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 20px;
      height: 60px;
      background-color: var(--primary-color);
      color: white;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      position: fixed;
      z-index: 101;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .app-header h1 {
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      gap: 5px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .user-controls {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    #theme-toggle {
      background: none;
      border: none;
      color: white;
      font-size: 1.1rem;
      cursor: pointer;
      transition: transform 0.2s ease;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #theme-toggle:hover {
      transform: scale(1.1);
    }

    #current-date {
      font-size: 0.8rem;
      opacity: 0.9;
      white-space: nowrap;
      margin-right: 20px;
    }

    .mobile-menu-toggle {
      display: none;
      background: none;
      border: none;
      color: white;
      font-size: 1.4rem;
      cursor: pointer;
      width: 40px;
      height: 40px;
      align-items: center;
      justify-content: center;
      margin-left: -20px;
    }

    .sidebar-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 99;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }

    .sidebar-overlay.active {
      opacity: 1;
      pointer-events: all;
    }

    .app-container {
      display: flex;
      flex: 1;
      overflow: hidden;
      position: relative;
    }

    .sidebar {
      width: var(--sidebar-width);
      background-color: var(--card-color);
      border-right: 1px solid var(--border-color);
      padding: 20px;
      display: flex;
      flex-direction: column;
      overflow-y: auto;
      transition: transform 0.3s ease;
      z-index: 100;
    }

    .sidebar-menu {
      display: flex;
      flex-direction: column;
      gap: 5px;
      margin-top: 50px;
      margin-bottom: 30px;
    }

    .sidebar-menu button {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 15px;
      border: none;
      background: none;
      color: var(--text-color);
      border-radius: 8px;
      cursor: pointer;
      text-align: left;
      transition: all 0.2s ease;
      width: 100%;
    }

    .sidebar-menu button:hover {
      background-color: rgba(0, 0, 0, 0.05);
    }

    .sidebar-menu button.active {
      background-color: var(--primary-color);
      color: white;
    }

    .sidebar-menu button i {
      width: 20px;
      text-align: center;
      flex-shrink: 0;
    }

    .projects-section {
      margin-top: 20px;
      flex: 1;
      min-height: 0;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .projects-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .projects-header h3 {
      font-size: 1rem;
      color: var(--text-light);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    #add-project-btn {
      background: none;
      border: none;
      color: var(--text-light);
      cursor: pointer;
      font-size: 1rem;
      transition: color 0.2s ease;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #add-project-btn:hover {
      color: var(--primary-color);
    }

    .projects-list {
      list-style: none;
      overflow-y: auto;
      flex: 1;
      padding-right: 5px;
    }

    .projects-list li {
      display: flex;
      align-items: center;
      padding: 8px 10px;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
      margin-bottom: 5px;
    }

    .projects-list li:hover {
      background-color: rgba(0, 0, 0, 0.05);
    }

    .projects-list li.active {
      background-color: rgba(74, 111, 165, 0.1);
      font-weight: 500;
    }

    .project-color {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 10px;
      flex-shrink: 0;
    }

    .project-name {
      flex: 1;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .project-count {
      background-color: var(--border-color);
      color: var(--text-light);
      font-size: 0.7rem;
      padding: 2px 6px;
      border-radius: 10px;
      margin-left: 10px;
    }

    .stats-section {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid var(--border-color);
    }

    .stat-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      flex: 1;
    }

    .stat-number {
      font-size: 1.2rem;
      font-weight: bold;
      color: var(--primary-color);
    }

    .stat-label {
      font-size: 0.7rem;
      color: var(--text-light);
      text-transform: uppercase;
      margin-top: 3px;
    }

    .main-content {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      position: relative;
    }

    .task-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      gap: 15px;
      flex-wrap: wrap;
    }

    .search-box {
      flex: 1;
      margin-top: 55px;
      min-width: 200px;
      max-width: 400px;
      position: relative;
    }

    .search-box i {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-light);
      pointer-events: none;
    }

    #task-search {
      width: 100%;
      padding: 10px 15px 10px 40px;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      background-color: var(--card-color);
      color: var(--text-color);
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }

    #task-search:focus {
      border-color: var(--primary-color);
      outline: none;
      box-shadow: 0 0 0 2px rgba(74, 111, 165, 0.2);
    }

    .filter-sort {
      display: flex;
      gap: 10px;
      flex: 1;
      min-width: 200px;
      max-width: 400px;
    }

    #task-filter, #task-sort {
      padding: 10px;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      background-color: var(--card-color);
      color: var(--text-color);
      cursor: pointer;
      font-size: 0.9rem;
      flex: 1;
      min-width: 120px;
    }

    #task-filter:focus, #task-sort:focus {
      outline: none;
      border-color: var(--primary-color);
    }

    #add-task-btn {
      padding: 10px 15px;
      background-color: var(--primary-color);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: background-color 0.2s ease;
      font-size: 0.9rem;
      white-space: nowrap;
    }

    #add-task-btn:hover {
      background-color: var(--secondary-color);
    }

    .tasks-container {
      background-color: var(--card-color);
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }

    .tasks-container h2 {
      font-size: 1.3rem;
      margin-bottom: 20px;
      color: var(--text-color);
    }

    .task-list {
      list-style: none;
    }

    .task-item {
      display: flex;
      align-items: flex-start;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 10px;
      background-color: var(--background-color);
      transition: all 0.2s ease;
      border-left: 4px solid transparent;
      gap: 15px;
    }

    .task-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .task-item.high-priority {
      border-left-color: var(--high-priority);
    }

    .task-item.medium-priority {
      border-left-color: var(--medium-priority);
    }

    .task-item.low-priority {
      border-left-color: var(--low-priority);
    }

    .task-checkbox {
      margin-top: 2px;
      width: 20px;
      height: 20px;
      cursor: pointer;
      accent-color: var(--primary-color);
      flex-shrink: 0;
    }

    .task-content {
      flex: 1;
      min-width: 0;
    }

    .task-title {
      font-weight: 500;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      gap: 8px;
      word-break: break-word;
    }

    .task-title.completed {
      text-decoration: line-through;
      color: var(--text-light);
    }

    .task-description {
      font-size: 0.9rem;
      color: var(--text-light);
      margin-bottom: 5px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      word-break: break-word;
    }

    .task-meta {
      display: flex;
      align-items: center;
      gap: 15px;
      font-size: 0.8rem;
      color: var(--text-light);
      flex-wrap: wrap;
    }

    .task-due-date {
      display: flex;
      align-items: center;
      gap: 5px;
      white-space: nowrap;
    }

    .task-due-date.overdue {
      color: var(--danger-color);
    }

    .task-priority {
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 0.7rem;
      font-weight: 500;
      text-transform: uppercase;
      white-space: nowrap;
    }

    .task-priority.high {
      background-color: rgba(244, 67, 54, 0.1);
      color: var(--high-priority);
    }

    .task-priority.medium {
      background-color: rgba(255, 152, 0, 0.1);
      color: var(--medium-priority);
    }

    .task-priority.low {
      background-color: rgba(76, 175, 80, 0.1);
      color: var(--low-priority);
    }

    .task-project {
      display: flex;
      align-items: center;
      gap: 5px;
      white-space: nowrap;
    }

    .task-actions {
      display: flex;
      gap: 10px;
      flex-shrink: 0;
    }

    .task-action-btn {
      background: none;
      border: none;
      color: var(--text-light);
      cursor: pointer;
      font-size: 1rem;
      transition: color 0.2s ease;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .task-action-btn:hover {
      color: var(--primary-color);
    }

    .task-action-btn.delete:hover {
      color: var(--danger-color);
    }

    .important-icon {
      color: var(--warning-color);
      flex-shrink: 0;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0px;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      padding: 20px;
      box-sizing: border-box;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background-color: var(--card-color);
      border-radius: 10px;
      width: 100%;
      max-width: 500px;
      padding: 25px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      position: relative;
      max-height: 90vh;
      overflow-y: auto;
    }

    .close-modal {
      position: absolute;
      top: 15px;
      right: 15px;
      font-size: 1.5rem;
      color: var(--text-light);
      cursor: pointer;
      background: none;
      border: none;
      transition: color 0.2s ease;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .close-modal:hover {
      color: var(--text-color);
    }

    .modal h2 {
      margin-bottom: 20px;
      color: var(--text-color);
      padding-right: 30px;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-row {
      display: flex;
      gap: 15px;
    }

    .form-row .form-group {
      flex: 1;
      min-width: 0;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-size: 0.9rem;
      color: var(--text-color);
    }

    .form-group input,
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: 10px;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      background-color: var(--background-color);
      color: var(--text-color);
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 2px rgba(74, 111, 165, 0.2);
    }

    .form-group textarea {
      resize: vertical;
      min-height: 60px;
    }

    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 20px;
    }

    .checkbox-group input {
      width: auto;
    }

    .form-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-top: 20px;
    }

    .btn-primary {
      padding: 10px 20px;
      background-color: var(--primary-color);
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      font-size: 0.9rem;
    }

    .btn-primary:hover {
      background-color: var(--secondary-color);
    }

    .btn-secondary {
      padding: 10px 20px;
      background-color: transparent;
      color: var(--text-color);
      border: 1px solid var(--border-color);
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 0.9rem;
    }

    .btn-secondary:hover {
      background-color: rgba(0, 0, 0, 0.05);
    }

    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: var(--text-light);
    }

    .empty-state i {
      font-size: 3rem;
      margin-bottom: 15px;
      opacity: 0.5;
    }

    .empty-state h3 {
      font-size: 1.2rem;
      margin-bottom: 10px;
    }

    .empty-state p {
      font-size: 0.9rem;
      margin-bottom: 20px;
    }

    #install-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
      padding: 10px 15px;
      background-color: var(--primary-color);
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      display: flex;
      align-items: center;
      gap: 8px;
      animation: pulse 2s infinite;
      transition: transform 0.2s ease;
    }

    #install-btn:hover {
      transform: scale(1.05);
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.05);
      }
      100% {
        transform: scale(1);
      }
    }

    @media (max-width: 768px) {
      .app-container {
        flex-direction: column;
      }
        
      .sidebar {
        position: fixed;
        top: 0;
        left: -280px;
        height: 100vh;
        z-index: 100;
        transition: transform 0.3s ease;
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
      }
        
      .sidebar.mobile-open {
        transform: translateX(280px);
      }
        
      .mobile-menu-toggle {
        display: flex;
      }
        
      .task-controls {
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
      }
        
      .search-box, .filter-sort {
        max-width: 100%;
        min-width: 100%;
      }
        
      #task-filter, #task-sort {
        width: 100%;
      }
        
      #add-task-btn {
        width: 100%;
        justify-content: center;
      }
        
      .form-row {
        flex-direction: column;
        gap: 0;
      }

      .task-item {
        flex-direction: column;
        gap: 10px;
      }

      .task-actions {
        align-self: flex-end;
      }

      .modal-content {
        padding: 20px 15px;
      }
    }

    @media (max-width: 480px) {
      .app-header h1 {
        font-size: 1.2rem;
      }

      #current-date {
        font-size: 0.8rem;
      }

      .task-meta {
        gap: 8px;
        font-size: 0.75rem;
      }

      .task-priority {
        font-size: 0.65rem;
      }
    }
    
    .app-footer {
      background-color: var(--card-color);
      color: var(--text-light);
      padding: 15px 20px;
      border-top: 1px solid var(--border-color);
      text-align: center;
      font-size: 0.8rem;
    }
      
    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
      
    .app-footer strong {
      color: var(--primary-color);
    }
      
    @media (max-width: 768px) {
      .app-footer {
        padding: 10px 15px;
      }
    }
  </style>
</head>
<body>
    <div class="container">
        <header class="app-header">
            <div class="header-left">
                <button class="mobile-menu-toggle" aria-label="Toggle menu"><i class="fas fa-bars"></i></button>
                <h1> Sovex Task Master</h1>
            </div>
            <div class="user-controls">
                <button id="theme-toggle" aria-label="Toggle theme"><i class="fas fa-moon"></i></button>
                <span id="current-date"></span>
            </div>
        </header>
        <div class="sidebar-overlay"></div>

        <div class="app-container">
            <aside class="sidebar">
                <div class="sidebar-menu">
                    <button class="active" data-view="all" aria-label="All tasks"><i class="fas fa-list"></i> All Tasks</button>
                    <button data-view="today" aria-label="Today's tasks"><i class="fas fa-calendar-day"></i> Today</button>
                    <button data-view="upcoming" aria-label="Upcoming tasks"><i class="fas fa-calendar-week"></i> Upcoming</button>
                    <button data-view="completed" aria-label="Completed tasks"><i class="fas fa-check-circle"></i> Completed</button>
                    <button data-view="important" aria-label="Important tasks"><i class="fas fa-star"></i> Important</button>
                    <button id="support-btn" aria-label="Get Support">
                     <i class="fas fa-headset"></i> Support</button>
                </div>
                
                <div class="projects-section">
                    <div class="projects-header">
                        <h3>Projects</h3>
                        <button id="add-project-btn" aria-label="Add project"><i class="fas fa-plus"></i></button>
                    </div>
                    <ul class="projects-list" id="projects-list" aria-label="Projects list">
                        <!-- Projects will be added here dynamically -->
                    </ul>
                </div>
                
                <div class="stats-section">
                    <div class="stat-item">
                        <span class="stat-number" id="total-tasks">0</span>
                        <span class="stat-label">Total</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="completed-tasks">0</span>
                        <span class="stat-label">Done</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="pending-tasks">0</span>
                        <span class="stat-label">Pending</span>
                    </div>
                </div>
            </aside>

            <main class="main-content">
                <div class="task-controls">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="task-search" placeholder="Search tasks..." aria-label="Search tasks">
                    </div>
                    <div class="filter-sort">
                        <select id="task-filter" aria-label="Filter tasks">
                            <option value="all">All</option>
                            <option value="high">High Priority</option>
                            <option value="medium">Medium Priority</option>
                            <option value="low">Low Priority</option>
                        </select>
                        <select id="task-sort" aria-label="Sort tasks">
                            <option value="dueDate">Due Date</option>
                            <option value="priority">Priority</option>
                            <option value="created">Created Date</option>
                            <option value="title">Title</option>
                        </select>
                    </div>
                    <button id="add-task-btn" aria-label="Add task"><i class="fas fa-plus"></i> Add Task</button>
                </div>

                <div class="tasks-container">
                    <h2 id="tasks-view-title">All Tasks</h2>
                    <ul class="task-list" id="task-list" aria-label="Tasks list">
                        <!-- Tasks will be added here dynamically -->
                    </ul>
                </div>
            </main>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal" id="task-modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="modal-title">
        <div class="modal-content">
            <button class="close-modal" aria-label="Close modal">&times;</button>
            <h2 id="modal-title">Add New Task</h2>
            <form id="task-form">
                <input type="hidden" id="task-id">
                <div class="form-group">
                    <label for="task-title">Title</label>
                    <input type="text" id="task-title" required aria-required="true">
                </div>
                <div class="form-group">
                    <label for="task-description">Description</label>
                    <textarea id="task-description" rows="3" aria-label="Task description"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-due-date">Due Date</label>
                        <input type="date" id="task-due-date" aria-label="Due date">
                    </div>
                    <div class="form-group">
                        <label for="task-priority">Priority</label>
                        <select id="task-priority" aria-label="Task priority">
                            <option value="low">Low</option>
                            <option value="medium" selected>Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-project">Project</label>
                        <select id="task-project" aria-label="Task project">
                            <option value="">No Project</option>
                            <!-- Projects will be added here dynamically -->
                        </select>
                    </div>
                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="task-important" aria-label="Mark as important">
                        <label for="task-important">Important</label>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Save Task</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal" id="project-modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="project-modal-title">
        <div class="modal-content">
            <button class="close-modal" aria-label="Close modal">&times;</button>
            <h2 id="project-modal-title">Add New Project</h2>
            <form id="project-form">
                <div class="form-group">
                    <label for="project-name">Project Name</label>
                    <input type="text" id="project-name" required aria-required="true">
                </div>
                <div class="form-group">
                    <label for="project-color">Color</label>
                    <select id="project-color" aria-label="Project color">
                        <option value="#4CAF50">Green</option>
                        <option value="#2196F3">Blue</option>
                        <option value="#9C27B0">Purple</option>
                        <option value="#FF9800">Orange</option>
                        <option value="#F44336">Red</option>
                        <option value="#607D8B">Gray</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Save Project</button>
                    <button type="button" class="btn-secondary close-modal"></button>
                </div>
            </form>
        </div>
    </div>
<footer class="app-footer">
  <div class="footer-content">
    <p>&copy; <span id="current-year"></span> Sovex Task Master. All rights reserved.</p>
    <p>Created and maintained by 
      <strong>
        <a href="https://wa.me/2349031300454" target="_blank" style="color: inherit; text-decoration: underline;">
          Suraj Salihu
        </a>
      </strong>
    </p>
  </div>
</footer>
    <script>
        // Register service worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }

        // Handle beforeinstallprompt event
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            // Prevent the mini-infobar from appearing on mobile
            e.preventDefault();
            // Stash the event so it can be triggered later
            deferredPrompt = e;
            // Show install button
            showInstallButton();
        });

        function showInstallButton() {
            // Don't show install button if already installed
            if (window.matchMedia('(display-mode: standalone)').matches) {
                return;
            }

            // Don't show if already exists
            if (document.getElementById('install-btn')) {
                return;
            }

            const installButton = document.createElement('button');
            installButton.id = 'install-btn';
            installButton.className = 'install-button';
            installButton.innerHTML = '<i class="fas fa-download"></i> Install App';
            installButton.setAttribute('aria-label', 'Install app');
            
            installButton.addEventListener('click', async () => {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;
                    console.log(`User response to the install prompt: ${outcome}`);
                    if (outcome === 'accepted') {
                        installButton.remove();
                    }
                    deferredPrompt = null;
                }
            });
            
            document.body.appendChild(installButton);
        }

        // Close modals when clicking outside
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('sidebar-overlay')) {
                document.querySelector('.sidebar').classList.remove('mobile-open');
                e.target.classList.remove('active');
            }
        });

        // Mobile menu toggle
        document.querySelector('.mobile-menu-toggle').addEventListener('click', () => {
            const sidebar = document.querySelector('.sidebar');
            const overlay = document.querySelector('.sidebar-overlay');
            
            sidebar.classList.toggle('mobile-open');
            overlay.classList.toggle('active');
        });

        // Theme toggle
        const themeToggle = document.getElementById('theme-toggle');
        themeToggle.addEventListener('click', () => {
            const isDark = document.body.getAttribute('data-theme') === 'dark';
            document.body.setAttribute('data-theme', isDark ? '' : 'dark');
            themeToggle.innerHTML = isDark ? '<i class="fas fa-moon"></i>' : '<i class="fas fa-sun"></i>';
            
            // Save theme preference to localStorage
            localStorage.setItem('theme', isDark ? 'light' : 'dark');
        });

        // Check for saved theme preference
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            document.body.setAttribute('data-theme', 'dark');
            themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        }

        // Update current date
function updateCurrentDate() {
    const now = new Date();
    const options = { weekday: 'short', month: 'short', day: 'numeric' }; // Removed 'year'
    document.getElementById('current-date').textContent = now.toLocaleDateString('en-US', options);
}
updateCurrentDate();
setInterval(updateCurrentDate, 60000); // Update every minute

        // Check if app is in standalone mode
        function checkStandaloneMode() {
            if (window.matchMedia('(display-mode: standalone)').matches) {
                document.body.classList.add('standalone-mode');
            }
        }
        checkStandaloneMode();

        // Data structure for tasks and projects
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
        let projects = JSON.parse(localStorage.getItem('projects')) || [
            { id: 'default', name: 'Personal', color: '#4a6fa5' }
        ];

        // Current view and filter
        let currentView = 'all';
        let currentFilter = 'all';
        let currentSort = 'dueDate';

        // DOM elements
        const taskList = document.getElementById('task-list');
        const projectsList = document.getElementById('projects-list');
        const taskProjectSelect = document.getElementById('task-project');
        const taskModal = document.getElementById('task-modal');
        const projectModal = document.getElementById('project-modal');
        const taskForm = document.getElementById('task-form');
        const projectForm = document.getElementById('project-form');
        const taskSearch = document.getElementById('task-search');
        const taskFilter = document.getElementById('task-filter');
        const taskSort = document.getElementById('task-sort');
        const tasksViewTitle = document.getElementById('tasks-view-title');

        // Modal close buttons
        document.querySelectorAll('.close-modal').forEach(button => {
            button.addEventListener('click', () => {
                taskModal.classList.remove('active');
                projectModal.classList.remove('active');
                document.querySelector('.sidebar-overlay').classList.remove('active');
            });
        });

        // Sidebar menu buttons
        document.querySelectorAll('.sidebar-menu button').forEach(button => {
            button.addEventListener('click', () => {
                document.querySelector('.sidebar-menu button.active').classList.remove('active');
                button.classList.add('active');
                currentView = button.dataset.view;
                
                // Update view title
                const viewTitles = {
                    'all': 'All Tasks',
                    'today': "Today's Tasks",
                    'upcoming': 'Upcoming Tasks',
                    'completed': 'Completed Tasks',
                    'important': 'Important Tasks'
                };
                tasksViewTitle.textContent = viewTitles[currentView];
                
                renderTasks();
            });
        });

        // Add task button
        document.getElementById('add-task-btn').addEventListener('click', () => {
            document.getElementById('modal-title').textContent = 'Add New Task';
            document.getElementById('task-id').value = '';
            taskForm.reset();
            taskModal.classList.add('active');
            document.querySelector('.sidebar-overlay').classList.add('active');
        });

        // Add project button
        document.getElementById('add-project-btn').addEventListener('click', () => {
            projectModal.classList.add('active');
            document.querySelector('.sidebar-overlay').classList.add('active');
        });

        // Task form submission
        taskForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const taskId = document.getElementById('task-id').value;
            const taskData = {
                title: document.getElementById('task-title').value,
                description: document.getElementById('task-description').value,
                dueDate: document.getElementById('task-due-date').value,
                priority: document.getElementById('task-priority').value,
                project: document.getElementById('task-project').value,
                important: document.getElementById('task-important').checked,
                completed: false,
                createdAt: new Date().toISOString()
            };
            
            if (taskId) {
                // Update existing task
                const index = tasks.findIndex(t => t.id === taskId);
                if (index !== -1) {
                    tasks[index] = { ...tasks[index], ...taskData };
                }
            } else {
                // Add new task
                taskData.id = Date.now().toString();
                tasks.unshift(taskData);
            }
            
            saveData();
            renderTasks();
            taskModal.classList.remove('active');
            document.querySelector('.sidebar-overlay').classList.remove('active');
        });

        // Project form submission
        projectForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const projectData = {
                id: Date.now().toString(),
                name: document.getElementById('project-name').value,
                color: document.getElementById('project-color').value
            };
            
            projects.push(projectData);
            saveData();
            renderProjects();
            projectModal.classList.remove('active');
            document.querySelector('.sidebar-overlay').classList.remove('active');
            projectForm.reset();
        });

        // Filter and sort change events
        taskFilter.addEventListener('change', () => {
            currentFilter = taskFilter.value;
            renderTasks();
        });

        taskSort.addEventListener('change', () => {
            currentSort = taskSort.value;
            renderTasks();
        });

        // Task search
        taskSearch.addEventListener('input', () => {
            renderTasks();
        });

        // Save data to localStorage
        function saveData() {
            localStorage.setItem('tasks', JSON.stringify(tasks));
            localStorage.setItem('projects', JSON.stringify(projects));
            updateStats();
        }

        // Update statistics
        function updateStats() {
            const totalTasks = tasks.length;
            const completedTasks = tasks.filter(task => task.completed).length;
            const pendingTasks = totalTasks - completedTasks;
            
            document.getElementById('total-tasks').textContent = totalTasks;
            document.getElementById('completed-tasks').textContent = completedTasks;
            document.getElementById('pending-tasks').textContent = pendingTasks;
        }

        // Render projects list
        function renderProjects() {
            projectsList.innerHTML = '';
            taskProjectSelect.innerHTML = '<option value="">No Project</option>';
            
            projects.forEach(project => {
                // Add to projects list
                const projectItem = document.createElement('li');
                projectItem.innerHTML = `
                    <span class="project-color" style="background-color: ${project.color}"></span>
                    <span class="project-name">${project.name}</span>
                    <span class="project-count">${tasks.filter(t => t.project === project.id).length}</span>
                `;
                projectItem.addEventListener('click', () => {
                    document.querySelectorAll('#projects-list li').forEach(li => li.classList.remove('active'));
                    projectItem.classList.add('active');
                    currentView = 'project';
                    tasksViewTitle.textContent = `${project.name} Tasks`;
                    renderTasks();
                });
                projectsList.appendChild(projectItem);
                
                // Add to project select in task form
                const option = document.createElement('option');
                option.value = project.id;
                option.textContent = project.name;
                taskProjectSelect.appendChild(option);
            });
            
            // Add default project if it doesn't exist
            if (!projects.some(p => p.id === 'default')) {
                const defaultProject = { id: 'default', name: 'Personal', color: '#4a6fa5' };
                projects.unshift(defaultProject);
                saveData();
                renderProjects();
            }
        }

        // Render tasks
        function renderTasks() {
            taskList.innerHTML = '';
            
            let filteredTasks = [...tasks];
            
            // Apply view filter
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate()).toISOString().split('T')[0];
            
            switch (currentView) {
                case 'today':
                    filteredTasks = filteredTasks.filter(task => task.dueDate === today);
                    break;
                case 'upcoming':
                    filteredTasks = filteredTasks.filter(task => task.dueDate && task.dueDate > today);
                    break;
                case 'completed':
                    filteredTasks = filteredTasks.filter(task => task.completed);
                    break;
                case 'important':
                    filteredTasks = filteredTasks.filter(task => task.important);
                    break;
                case 'project':
                    const activeProject = document.querySelector('#projects-list li.active');
                    if (activeProject) {
                        const projectId = projects.find(p => p.name === activeProject.querySelector('.project-name').textContent)?.id;
                        filteredTasks = filteredTasks.filter(task => task.project === projectId);
                    }
                    break;
            }
            
            // Apply priority filter
            if (currentFilter !== 'all') {
                filteredTasks = filteredTasks.filter(task => task.priority === currentFilter);
            }
            
            // Apply search
            const searchTerm = taskSearch.value.toLowerCase();
            if (searchTerm) {
                filteredTasks = filteredTasks.filter(task => 
                    task.title.toLowerCase().includes(searchTerm) || 
                    (task.description && task.description.toLowerCase().includes(searchTerm))
                );
            }
            
            // Apply sorting
            filteredTasks.sort((a, b) => {
                switch (currentSort) {
                    case 'priority':
                        const priorityOrder = { high: 3, medium: 2, low: 1 };
                        return priorityOrder[b.priority] - priorityOrder[a.priority];
                    case 'created':
                        return new Date(b.createdAt) - new Date(a.createdAt);
                    case 'title':
                        return a.title.localeCompare(b.title);
                    case 'dueDate':
                    default:
                        if (!a.dueDate && !b.dueDate) return 0;
                        if (!a.dueDate) return 1;
                        if (!b.dueDate) return -1;
                        return a.dueDate.localeCompare(b.dueDate);
                }
            });
            
            // Display tasks
            if (filteredTasks.length === 0) {
                taskList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-tasks"></i>
                        <h3>No tasks found</h3>
                        <p>Try changing your filters or add a new task</p>
                    </div>
                `;
                return;
            }
            
            filteredTasks.forEach(task => {
                const taskItem = document.createElement('li');
                taskItem.className = `task-item ${task.priority}-priority`;
                taskItem.innerHTML = `
                    <input type="checkbox" class="task-checkbox" ${task.completed ? 'checked' : ''} aria-label="Mark task as completed">
                    <div class="task-content">
                        <div class="task-title ${task.completed ? 'completed' : ''}">
                            ${task.title}
                            ${task.important ? '<i class="fas fa-star important-icon" aria-hidden="true"></i>' : ''}
                        </div>
                        ${task.description ? `<div class="task-description">${task.description}</div>` : ''}
                        <div class="task-meta">
                            ${task.dueDate ? `
                                <div class="task-due-date ${task.dueDate < today && !task.completed ? 'overdue' : ''}">
                                    <i class="far fa-calendar-alt" aria-hidden="true"></i>
                                    ${formatDate(task.dueDate)}
                                    ${task.dueDate < today && !task.completed ? ' (Overdue)' : ''}
                                </div>
                            ` : ''}
                            <div class="task-priority ${task.priority}">${task.priority}</div>
                            ${task.project ? `
                                <div class="task-project">
                                    <i class="fas fa-project-diagram" aria-hidden="true"></i>
                                    ${projects.find(p => p.id === task.project)?.name || ''}
                                </div>
                            ` : ''}
                        </div>
                    </div>
                    <div class="task-actions">
                        <button class="task-action-btn edit" aria-label="Edit task"><i class="fas fa-pencil-alt"></i></button>
                        <button class="task-action-btn delete" aria-label="Delete task"><i class="fas fa-trash-alt"></i></button>
                    </div>
                `;
                
                // Task checkbox event
                const checkbox = taskItem.querySelector('.task-checkbox');
                checkbox.addEventListener('change', () => {
                    task.completed = checkbox.checked;
                    saveData();
                    renderTasks();
                });
                
                // Edit button event
                taskItem.querySelector('.edit').addEventListener('click', () => {
                    document.getElementById('modal-title').textContent = 'Edit Task';
                    document.getElementById('task-id').value = task.id;
                    document.getElementById('task-title').value = task.title;
                    document.getElementById('task-description').value = task.description || '';
                    document.getElementById('task-due-date').value = task.dueDate || '';
                    document.getElementById('task-priority').value = task.priority;
                    document.getElementById('task-project').value = task.project || '';
                    document.getElementById('task-important').checked = task.important || false;
                    
                    taskModal.classList.add('active');
                    document.querySelector('.sidebar-overlay').classList.add('active');
                });
                
                // Delete button event
                taskItem.querySelector('.delete').addEventListener('click', () => {
                    if (confirm('Are you sure you want to delete this task?')) {
                        tasks = tasks.filter(t => t.id !== task.id);
                        saveData();
                        renderTasks();
                    }
                });
                
                taskList.appendChild(taskItem);
            });
        }

        // Format date for display
        function formatDate(dateString) {
            if (!dateString) return '';
            
            const date = new Date(dateString);
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            if (date.toDateString() === today.toDateString()) {
                return 'Today';
            } else if (date.toDateString() === tomorrow.toDateString()) {
                return 'Tomorrow';
            } else {
                return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
            }
        }

        // Initialize the app
        function init() {
            renderProjects();
            renderTasks();
            updateStats();
        }

        init();
    </script>
    <script>
  document.getElementById('current-year').textContent = new Date().getFullYear();
</script>
    <script>
  document.getElementById('support-btn').addEventListener('click', function () {
    window.location.href = "mailto:soorajsalihu@gmail.com?subject=Support Request";
  });
  document.getElementById('support-btn').addEventListener('click', function () {
    window.open("https://wa.me/2349031300454", "_blank");
  });
</script>
</body>
</html>